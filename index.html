<!DOCTYPE html>
<html>
  <head>
    <title>Ruby</title>
    <style>
	    .div {
		    position: absolute;
		    width: 100%;
		    height: 100%;
		    background: green;
	    }
	    
	    .hud {
		    position: absolute;
		    left: 0px;
		    right: 0px;
		    bottom: 0px;
		    top: 0px;
		    margin: auto;
		    width: 100%;
		    height: 100%;
		    background: rgba(55, 186, 195, 0.41);
		    border-radius: 30px;
		    border: 1px solid rgb(55, 186, 195);
	    }
	    .hidden {
		    display: none;
	    }
	    .head {
		    position: absolute;
		    left: 0px;
		    right: 0px;
		    top: 0px;
		    bottom: 0px;
		    margin: auto;
		    width: 100px;
		    height: 120px;
		    background: #ffeca8;
		    border-radius: 100%;
	    }
	    .eye {
		    position: relative;
		    display: inline-block;
		    border-radius: 50%;
		    height: 30px;
		    width: 30px;
		    background: white;
	    }
	    .container > #eyelash {
		    width: 4px;
		    height: 10px;
		    background: black;
	    }
	    .eyelash1 {
		    position: absolute;
		    left: 3px;
		    top: -7px;
		    transform: rotate(-45deg);
	    }
	    .eyelash2 {
		    position: absolute;
		    left: 13px;
		    top: -7px;
	    }
	    .eyelash3 {
		    position: absolute;
		    left: 23px;
		    top: -7px;
		    transform: rotate(45deg);
	    }
	    .eyelash4 {
		    position: absolute;
		    right: 3px;
		    top: -7px;
		    transform: rotate(45deg);
	    }
	    .eyelash5 {
		    position: absolute;
		    right: 13px;
		    top: -7px;
	    }
	    .eyelash6 {
		    position: absolute;
		    right: 23px;
		    top: -7px;
		    transform: rotate(-45deg);
	    }
	    .mouth {
		    position: absolute;
		    left: 0px;
		    right: 0px;
		    bottom: 10px;
		    margin: auto;
		    width: 40px;
	    }
	    .hair {
		    position: absolute;
		    top: 0px;
		    left: 0px;
		    right: 0px;
		    bottom: 0px;
		    margin: auto;
		    width: 200px;
		    height: 120px;
	    }
	    .hair-child {
		    position: absolute;
		    top: -20px;
		    left: 0px;
		    right: 0px;
		    margin: auto;
		    height: 200px;
		    width: 140px;
		    background: #442c00;
		    border-top-left-radius: 80px;
		    border-top-right-radius: 80px;
	    }
	    .eye:after { /*pupil*/
		    position: absolute;
		    bottom: 17px;
		    right: 10px;
		    width: 10px;
		    height: 10px;
		    background: #000;
		    border-radius: 50%;
		    content: " ";
	    }
	    .container {
		    position: absolute;
		    top: 0px;
		    left: 0px;
		    right: 0px;
		    bottom: 30px;
		    margin: auto;
		    width: 64px;
		    height: 30px;
	    }
	    .move-area {
		    position: absolute;
		    top: 0px;
		    left: 0px;
		    width: 100%;
		    height: 100%;
	    }
    </style>
  </head>
  <body>
          
    <div class="hud">
      <section class="move-area">
	      <div class="hair"><div class="hair-child"></div></div>
	      <div class="head">
		  <div class="container">
			  <div class="eyelash1" id="eyelash"></div><div class="eyelash2" id="eyelash"></div><div class="eyelash3" id="eyelash"></div>
			  <div class="eyelash4" id="eyelash"></div><div class="eyelash5" id="eyelash"></div><div class="eyelash6" id="eyelash"></div>
		    <div class="eye"></div>
		    <div class="eye"></div>
		  </div>
		      <img src="https://image.flaticon.com/icons/svg/725/725081.svg" class="mouth"/>
	      </div>
		</section>
    </div>
	  <div></div>
    <div id="audio"></div>
    <iframe id="vidFrame" src=""></iframe>
    <p>Please accept microphone usage and allow popups when the popup blocker box shows up in the url bar</p>
    <p><h3>List of commands:</h3>
      google *term<br>
      look up *website name<br>
      close tab (only works on recently opened tab that was opened with Ruby)<br>
      new tab<br>
      say *what she will repeat<br>
      ruby<br>
      why is this taking so long to load<br>
      hide hud<br>
      show hud<br>
      play song<br>
      play random song<br>
      play<br>
      pause<br>
    </p>
    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
	
    <script src="./scripts/jquery.min.js"></script>
    <script src="./scripts/annyang.min.js"></script>
    <script src="./scripts/responsivevoice.js"></script>
    <script>
	    
      
      responsiveVoice.speak("Hello. I am Ruby.", "US English Female", {pitch: 1});
      
      
      if (annyang) {
  // Let's define our first command. First the text we expect, and then the function it should call
        var child;
	      
	      var player;

	// this function gets called when API is ready to use
	function onYouTubePlayerAPIReady() {
	  // create the global player from the specific iframe (#video)
	  player = new YT.Player('video', {
	    events: {
	      // call this function when player is ready to use
	      'onReady': onPlayerReady
	    }
	  });
	}
	      // Inject YouTube API script
	var tag = document.createElement('script');
	tag.src = "https://www.youtube.com/player_api";
	var firstScriptTag = document.getElementsByTagName('script')[0];
	firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        
  var commands = {
    'google *term': function(term) {
      child = window.open('https://www.google.com/#q='+term);
    },
    
    'close tab': function() {
      child.close();
    },
    
    'cloze tab': function() {
      child.close();
    },
          
    'refresh page': function() {
      child.location.reload();
    },
    
    'new tab': function() {
      child = window.open('https://www.google.com/');
    },
    
    'look up *web': function(web) {
      child = window.open('https://www.'+web);
    },
    
    'say *repeat': function(repeat) {
      responsiveVoice.speak(repeat, "US English Female", {pitch: 1});
    },
    
    'ruby': function() {
      responsiveVoice.speak("Yes?", "US English Female", {pitch: 1});
    },
    
    'why is this taking so long to load': function() {
      responsiveVoice.speak("Maybe you have too many tabs open or your internet is slow.", "US English Female", {pitch: 1});
    },
	 
    'hide hud': function() {
      $(".hud").addClass("hidden");
    },
	  
    'show hud': function() {
      $(".hud").removeClass("hidden");
    },
          
    'play song': function() {
      var site = 'https://www.youtube.com/embed/e7xsVF_XTEs?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG';
      document.getElementById('vidFrame').src = site;
            
      $("#vidFrame")[0].src += "&autoplay=1";
      ev.preventDefault();
    },
          
    'play random song': function() {
            
      var mySongs = ['https://www.youtube.com/embed/e7xsVF_XTEs?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/DZ2E9L0Rwms?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG', 
		     'https://www.youtube.com/embed/aioXn0ut6gE?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/DZ2E9L0Rwms?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/Cwkej79U3ek?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/vIT8FK_50Vs?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/IvMYDp_c66Q?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/fpf3zBgvXT4?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/Yj4yTAXxcp4?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/fn4qY0pC4Z4?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/m6z3OXyFE-I?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/bjQzJAKxTrE?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/djV11Xbc914?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/dVVZaZ8yO6o?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/gK_O20Pg3Qc?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/fkBE1J_etsc?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/GVN17U3Vg34?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/wzPRS4X6AXI?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/N5wVZwdHmRY?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/RIYd6Xdn88U?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/WlRpGj7LWS4?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/4jzsKJvWiEI?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/3FvtiNHNJ9I?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/DavJ9UKS2ps?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/sbOcVER0WqU?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/qdpvj_iVAFk?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/LBr7kECsjcQ?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/ySER3OT5etg?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/coyBZYv-u_o?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/Y6ljFaKRTrI?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG',
		     'https://www.youtube.com/embed/CyY-ngeCeNs?list=PLBKAFEFN7AWFQnucPAnCET88FtVfcLklG'];
      
      var show = mySongs[Math.floor(Math.random() * mySongs.length)];
            
      document.getElementById('vidFrame').src = show;
            
      $("#vidFrame")[0].src += "&autoplay=1";
      ev.preventDefault();
    },
          
    'play': function() {
      player.playVideo();
    },
          
    'pause': function() {
      player.pauseVideo();
    },
    
    'turn on light': function() {
      //open modified version of rpi light on/off webpage that closes itself after turning light on
    },
    
  };

  // Add our commands to annyang
  annyang.addCommands(commands);

  // Start listening. You can call this here, or attach this call to an event, button, etc.
  annyang.start();
};
    
    </script>
    <script>
            $(".move-area").mousemove(function(event) {
  var eye = $(".eye");
  var x = (eye.offset().left) + (eye.width() / 2);
  var y = (eye.offset().top) + (eye.height() / 2);
  var rad = Math.atan2(event.pageX - x, event.pageY - y);
  var rot = (rad * (180 / Math.PI) * -1) + 180;
  eye.css({
    '-webkit-transform': 'rotate(' + rot + 'deg)',
    '-moz-transform': 'rotate(' + rot + 'deg)',
    '-ms-transform': 'rotate(' + rot + 'deg)',
    'transform': 'rotate(' + rot + 'deg)'
  });
});
    </script>
  </body>
</html>
